/* ---------- Animácia kúpeľa (bubliny) ---------- */
#bath-animation {
  position: absolute;
  width: 140px;
  height: 160px;
  top: -10px;
  left: -10px;
  pointer-events: none;
  border-radius: 50%;
  opacity: 0;
  z-index: 40;
  overflow: hidden;
}

#bath-animation::before,
#bath-animation::after {
  content: "";
  position: absolute;
  width: 40px;
  height: 40px;
  border-radius: 50%;
  border: 2px solid rgba(255, 255, 255, 0.8);
  background: radial-gradient(circle, rgba(255,255,255,0.6), transparent 70%);
  box-shadow: 0 0 10px rgba(255,255,255,0.9);
  animation: bubble-up 1.4s infinite ease-out;
}

#bath-animation::after {
  width: 26px;
  height: 26px;
  left: 60px;
  animation-duration: 1.8s;
  animation-delay: 0.2s;
}

@keyframes bubble-up {
  0% {
    transform: translate(20px, 90px) scale(0.7);
    opacity: 0.1;
  }
  40% { opacity: 1; }
  100% {
    transform: translate(10px, -10px) scale(1.1);
    opacity: 0;
  }
}

/* ---------- Feed animácia ---------- */
#feed-animation {
  position: absolute;
  bottom: 80px;
  left: 46%;
  transform: translateX(-50%);
  font-size: 30px;
  opacity: 0;
  pointer-events: none;
  z-index: 1000;
}

@keyframes feedPop {
  0% {
    transform: translateX(-200%) translateY(8px) scale(0.5);
    opacity: 0;
  }
  20% {
    transform: translateX(-50%) translateY(20px) scale(1.2);
    opacity: 1;
  }
  50% {
    transform: translateX(-50%) translateY(30px) scale(1);
  }
  70% {
    transform: translateX(-50%) translateY(50px) scale(1.05);
  }
  100% {
    transform: translateX(-50%) translateY(60px) scale(0.8);
    opacity: 0;
  }
}

.feed-show {
  animation: feedPop 5s ease-out forwards;
}
/* Jemné chvenie prasiatka */
@keyframes pig-shake {
  0%   { transform: translate(0, 0) rotate(0deg); }
  20%  { transform: translate(-1px, 1px) rotate(-1deg); }
  40%  { transform: translate(1px, -1px) rotate(1deg); }
  60%  { transform: translate(-1px, -1px) rotate(0.5deg); }
  80%  { transform: translate(1px, 1px) rotate(-0.5deg); }
  100% { transform: translate(0, 0) rotate(0deg); }
}

/* prasiatko vždy jemne vibruje */
#pig {
  animation: pig-shake 1.8s infinite ease-in-out;
}

/* ===========================
     ANIMÁCIA ŽMURKNUTIA
   =========================== */

/* Očká pri žmurknutí sa zmenšia na horizontálnu čiaru */
.pig-eye.blinking {
  animation: blink-eyes 2s ease-in-out forwards;
}

.pig-pupil.blinking {
  opacity: 0;
}

@keyframes blink-eyes {
  0% {
    height: 33px;
  }
  50% {
    height: 4px;
  }
  100% {
    height: 33px;
  }
}

/* ---------- Spánok (stojaci, zavreté oči, Z Z Z) ---------- */
@keyframes standBreathe {
  0% { transform: translateY(0) rotate(0deg); }
  50% { transform: translateY(2px) rotate(-2deg); }
  100% { transform: translateY(0) rotate(0deg); }
}

@keyframes breathe {
  0% { transform: scale(1); }
  50% { transform: scale(0.995); }
  100% { transform: scale(1); }
}

@keyframes zzUp {
  0% { transform: translateY(0); opacity: 0; }
  10% { opacity: 1; }
  70% { transform: translateY(-26px); opacity: 0.9; }
  100% { transform: translateY(-46px); opacity: 0; }
}

/* When bedroom background is active and pig has .sleeping, show standing sleep visuals */
#game-area.bedroom #pig.sleeping {
  animation: standBreathe 1.2s ease-in-out infinite;
  transform-origin: center center;
  z-index: 10;
  filter: brightness(0.95);
}

/* Make eyes appear closed and hide pupils while sleeping */
#game-area.bedroom #pig.sleeping .pig-eye {
  height: 4px;
  transition: height 120ms ease;
}

#game-area.bedroom #pig.sleeping .pig-pupil {
  opacity: 0;
}

/* ZZZ bubble using pseudo-element so it appears immediately when .sleeping is added */
#game-area.bedroom #pig.sleeping::after {
  content: "Z Z Z";
  position: absolute;
  right: -6px;
  top: -8px;
  color: rgba(255,255,255,0.95);
  font-weight: bold;
  font-size: 18px;
  text-shadow: 0 1px 0 rgba(0,0,0,0.3);
  opacity: 0;
  pointer-events: none;
  animation: zzUp var(--sleep-duration, 1400ms) ease-out infinite;
}

/* Prevent blink animation from showing during sleeping (double-safety) */
#game-area.bedroom #pig.sleeping .pig-eye.blinking {
  animation: none !important;
  height: 4px !important;
}
#game-area.bedroom #pig.sleeping .pig-pupil.blinking {
  opacity: 0 !important;
}

/* Mining animation (pickaxe swing) */
#mine-animation {
  position: absolute;
  width: 120px;
  height: 120px;
  right: 120px;
  bottom: 40px;
  pointer-events: none;
  opacity: 0;
  transform-origin: 20px 20px;
}

@keyframes mine-swing {
  0% { transform: rotate(-30deg) translate(0,0); opacity: 1; }
  40% { transform: rotate(25deg) translate(4px,-6px); }
  80% { transform: rotate(-20deg) translate(-4px,6px); }
  100% { transform: rotate(-30deg) translate(0,0); opacity: 0; }
}

#mine-animation.mining {
  animation: mine-swing 2.8s ease-in-out forwards;
  opacity: 1;
  background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="120" height="120"><text x="10" y="70" font-size="60">⛏️</text></svg>') center/contain no-repeat;
}

/* ---------- Smoke puff animation (moved from dizajn.css) ---------- */
.smoke-puff {
  position: absolute;
  width: 24px;
  height: 24px;
  border-radius: 50%;
  background: radial-gradient(circle at 40% 30%, rgba(255,255,255,0.9), rgba(200,200,200,0.7));
  opacity: 0;
  pointer-events: none;
}

@keyframes puffUp {
  0% { transform: translate(0,0) scale(0.4); opacity: 0; }
  20% { opacity: 0.9; }
  100% { transform: translate(-40px, -90px) scale(1.2); opacity: 0; }
}

/* Smoke effect container positioned relative to pig */
#smoke-effect { position: absolute; right: -10px; top: -10px; width: 120px; height: 120px; pointer-events: none; }
#pig.smoking #smoke-effect .smoke-puff { animation: puffUp 1400ms ease-out forwards; }
#pig.smoking .pig-head { transform: translateX(-50%) rotate(-6deg); }



